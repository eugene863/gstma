# config file version
apiVersion: 1

# List of templates to import or update
templates:
  # <int> organization ID, default = 1
  - orgID: 1
    # <string, required> name of the template, must be unique
    name: "Telegram template"
    # <string, required> content of the the template
    template: |
      {{- define "telegram.S4.firing" -}}
      üõ∞ <b>–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ S4</b>

      –°—Ç–∞—Ç—É—Å: {{ .Status }}
      –ù–∞—á–∞–ª–æ: {{ .StartsAt }}
      –ú–µ—Ç–∫–∏:
      {{- range .Labels.SortedPairs }}
        {{ .Name }}: {{ .Value -}}
      {{ end }}
      –ó–Ω–∞—á–µ–Ω–∏—è:
      {{- range $k, $v := .Values }} {{ $k }}={{ $v }}{{ end }}
      {{- end -}}

      {{- define "telegram.S4.ok" -}}
      üî¨ <b>–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π S4</b>

      –°—Ç–∞—Ç—É—Å: {{ .Status }}
      –ö–æ–Ω–µ—Ü: {{ .EndsAt }}
      –ú–µ—Ç–∫–∏:
      {{- range .Labels.SortedPairs }}
        {{ .Name }}: {{ .Value -}}
      {{ end }}
      –ó–Ω–∞—á–µ–Ω–∏—è:
      {{- range $k, $v := .Values }} {{ $k }}={{ $v }}{{ end }}
      {{- end -}}

      {{ define "telegram.S4" }}
      {{ range .Alerts }}
        {{- if eq .Status "firing" -}}
          {{ template "telegram.S4.firing" . }}
        {{- else -}}
          {{ template "telegram.S4.ok" . }}
        {{- end }}

      –î–∞—à–±–æ—Ä–¥: {{ .DashboardURL }}
      –ü–∞–Ω–µ–ª—å: {{ .PanelURL }}

      {{ end }}
      {{ end }}

  # <int> organization ID, default = 1
  - orgID: 1
    # <string, required> name of the template, must be unique
    name: "NoData template"
    # <string, required> content of the the template
    template: |
      {{- define "nodata.firing" -}}
      ‚ùó <b>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö!</b>

      –°—Ç–∞—Ç—É—Å: {{ .Status }}
      –ù–∞—á–∞–ª–æ: {{ .StartsAt }}
      –ú–µ—Ç–∫–∏:
      {{- range .Labels.SortedPairs }}
        {{ .Name }}: {{ .Value -}}
      {{ end }}
      {{- end -}}

      {{- define "nodata.ok" -}}
      ‚úîÔ∏è <b>–î–∞–Ω–Ω—ã–µ –ø–æ—à–ª–∏!</b>

      –°—Ç–∞—Ç—É—Å: {{ .Status }}
      –ö–æ–Ω–µ—Ü: {{ .EndsAt }}
      –ú–µ—Ç–∫–∏:
      {{- range .Labels.SortedPairs }}
        {{ .Name }}: {{ .Value -}}
      {{ end }}
      {{- end -}}

      {{ define "nodata" }}
      {{ range .Alerts }}
        {{- if eq .Status "firing" -}}
          {{ template "nodata.firing" . }}
        {{- else -}}
          {{ template "nodata.ok" . }}
        {{- end }}

      –î–∞—à–±–æ—Ä–¥: {{ .DashboardURL }}
      –ü–∞–Ω–µ–ª—å: {{ .PanelURL }}

      {{ end }}
      {{ end }}
